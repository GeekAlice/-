# 差分约束
**应用**：

(1) 求不等式组（特殊）可行解  
方程形式：X𝑖 ≤ X𝑗 + C𝑘  
从j走到i，长度为C𝑘的一条边  
原点需要满足的条件：从原点出发，一定可以走到所有的边  
不等式无解=存在负环  
(2) 求值最大值或最小值  
结论： 如果求最小值，应该求最长路。如果求最大值，应该求最短路  
  
类比最短路  
  i→j   求之前 d[j] > d[i]+c  
   c    求完后 d[j] ≤ d[i]+c  
一个图里每个点求完最短距离后每个点的最短距离都有第二个不等式满足  
即  任何一个最短路问题 可以 转化为一个差分约束问题  
同理  一个差分约束问题 可以 转化为一个单源最短路问题  

最长路  
   i→j   求之前 d[j] < d[i]+c   
   c     求完后 d[j] ≥ d[i]+c    

**步骤**：  
[1] 先将每一个不等式 X𝑖 ≤ X𝑗 + C𝑘 转化成一条从xj走到xi，长度为ck的一条辨  
[2] 找一个原点，该原点必须遍历所有边  
[3] 从原点求一遍单元最短路  
[4] 如果没有负环，则dist[i]就是原不等式组的一个可行解  


# 最近公共祖先
**两个方法**:

**1. 向上标记法 O(n)**   

假设一棵树  
	 o  
        / \  
       .    o  
      /  \  
     o    .  
   /  \   2  
  .     o  
  1  

步骤  
1 先从点1往上走到根节点,走过的点都标记  
2 再从点2往上走,碰到的第一个带标记的点就是最近公共祖先  

**2. 倍增法 **  

	fa[i,j]表示从i开始，向上走2^j步所能走到的节点。0 <= j <= logn. 
	depth[i] 表示深度（层数）  
    
步骤
	1. 先将两个点跳到同一层   
  	2. 让两点同时往上跳  
	预处理O(nlogn)   
	查询O(logn)  

